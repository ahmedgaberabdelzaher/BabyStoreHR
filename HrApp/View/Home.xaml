<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage
    xmlns="http://xamarin.com/schemas/2014/forms" NavigationPage.HasNavigationBar="False"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" xmlns:controls="clr-namespace:HrApp.Controls" xmlns:notification="clr-namespace:HrApp.View.NotificationViews" xmlns:pancakeview="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView" xmlns:local="clr-namespace:HrApp.Converters"
    x:Class="HrApp.View.Home" BackgroundImageSource="home.png">
    <ContentPage.Resources>
        <ResourceDictionary>
            <local:ConverterBase64ImageSource x:Key="Base64Image" />
        </ResourceDictionary>
    </ContentPage.Resources>
    <ContentPage.Content>
 <Grid >
     <Image Source="home.png" Aspect="AspectFill"></Image>
            <StackLayout >
                <StackLayout.Margin>
                    <OnPlatform x:TypeArguments="Thickness">
                        <On Platform="iOS" Value="0,50,20,10"></On>
                        <On Platform="Android" Value="0,30,20,10"/>

                    </OnPlatform>
                </StackLayout.Margin>

                <controls:Useravatar  Margin="0,0,10,0"/>
                <Grid RowDefinitions="auto,auto,auto" IsVisible="false" ColumnDefinitions="40,auto,*,30,auto,40" Margin="0,0,0,15">
<Image Source="HomeIcon.png" VerticalOptions="StartAndExpand" Margin="0,7,0,0" Grid.Row="0" Grid.RowSpan="2" Grid.Column="0">
    <Image.HeightRequest>
                    <OnPlatform x:TypeArguments="x:Double">
                        <On Platform="iOS" Value="45"></On>
        <On Platform="Android" Value="{StaticResource profileHeight}"></On>


                    </OnPlatform>
                </Image.HeightRequest>
                        <Image.Triggers >
                            <DataTrigger TargetType="Image" Binding="{Binding UserImage}" Value="">
                                <Setter Property="Source" Value="ProfileImgDefault.png"/>
                            </DataTrigger>
                        </Image.Triggers>
                    </Image>

                    <Label Text="Employee App" TextColor="#FFFFFF" FontSize="20" Grid.Row="0" Grid.Column="1"></Label>
<Label Text="Home" Margin="0,-10,0,0" Grid.Row="1" FontSize="15" TextColor="#FFFFFF" Grid.Column="1"></Label>

    <Image Source="notificationIcon.png" Grid.Row="0"  Grid.Column="3"></Image>
    <StackLayout  Grid.Row="0"  Grid.Column="5" Grid.RowSpan="2" HorizontalOptions="End">
       
                <Image Source="ProfileIconDefault.png" Aspect="Fill">
                 <Image.HeightRequest>
<OnPlatform x:TypeArguments="x:Double">
    <On Platform="iOS" Value="{StaticResource profileHeight}"></On>
        <On Platform="Android" Value="{StaticResource profileHeight}"></On>

</OnPlatform>
</Image.HeightRequest>
                         <Image.WidthRequest>
<OnPlatform x:TypeArguments="x:Double">
    <On Platform="iOS" Value="{StaticResource profileWidth}"></On>
        <On Platform="Android" Value="{StaticResource profileWidth}"></On>

</OnPlatform>
</Image.WidthRequest>
                     <Image.GestureRecognizers>
            <TapGestureRecognizer Command="{Binding MyProfileCommand}"></TapGestureRecognizer>
        </Image.GestureRecognizers>
                </Image>


    </StackLayout>
             <Label Text="Logout" HorizontalOptions="EndAndExpand" Grid.Row="2"  Grid.Column="3" Grid.ColumnSpan="3" FontFamily="Poppins-Bold.ttf" HorizontalTextAlignment="Center" TextColor="#FFFFFF">
                 <Label.GestureRecognizers>
                 <TapGestureRecognizer Command="{Binding SignOutCommand}"></TapGestureRecognizer>
             </Label.GestureRecognizers>
         </Label>

</Grid>
                <!--
                <controls:MenuControl IsVisible="{Binding IsEmployeeCenter}" x:Name="EmployeeCenter" FirstItemCommand="{Binding EmployeeCenterCommand}" FirstItemImage="employeemyprofileicon.png" FirstItemText="My Profile" SecondItemText="Online Services" SecondItemImage="employeeonlineservicesicon.png" SecondItemCommand="{Binding OnlineRequestsCommand}" ThirdItemTitleText="STAFF DUTY SCHEDULE" ThirdItemImageSource="employeestaffdutyscheduleicon.png" ThirdItemCommand="{Binding EmployeeCenterCommand}" FourthItemTitleText="DIGITAL VALET" FourthItemImageSource="employeedigitalvaleticon.png" FourthItemCommand="{Binding EmployeeCenterCommand}" FifthItemTitleText="MY ATTENDANCE" FifthItemImageSource="employeeatticon.png" FifthItemCommand="{Binding EmployeeCenterCommand}"></controls:MenuControl> 
                                  <controls:MenuControl IsVisible="{Binding IsManagereCenter}" x:Name="ManagerCenter" FirstItemCommand="{Binding OnlineRequestsCommand}" FirstItemImage="manageronlinerequestsicon.png" FirstItemText="ONLINE REQUESTS" SecondItemText="EMPLOYEE ATTENDANCE" SecondItemImage="managerempatticon.png" SecondItemCommand="{Binding EmployeeCenterCommand}" ThirdItemTitleText="DEPARTMENT SCHEDULE" ThirdItemImageSource="managerdepartscheduleicon.png" ThirdItemCommand="{Binding EmployeeCenterCommand}" FourthItemTitleText="EMPLOYEE DIRECTORY" FourthItemImageSource="managerempdirectoryicon.png" FourthItemCommand="{Binding EmployeeCenterCommand}" FifthItemTitleText="BUILDING CAMERAS" FifthItemImageSource="managerbuildingcamerasicon.png" FifthItemCommand="{Binding EmployeeCenterCommand}"></controls:MenuControl> 
                              <controls:MenuControl IsVisible="{Binding IsOnlineServices}" x:Name="OnlineServices" FirstItemCommand="{Binding OnlineRequestsCommand}" FirstItemImage="servicesleavesicon.png" FirstItemText="LEAVES" SecondItemText="OVERTIME" SecondItemImage="servicesovertimeicon.png" SecondItemCommand="{Binding EmployeeCenterCommand}" FourthItemTitleText="CERTIFICATES" FourthItemImageSource="servicescertificatesicon.png" FourthItemCommand="{Binding EmployeeCenterCommand}" FifthItemTitleText="STC SUBCRIPTION" FifthItemImageSource="servicesstcsubicon.png" FifthItemCommand="{Binding EmployeeCenterCommand}"></controls:MenuControl> 
-->
                <StackLayout VerticalOptions="CenterAndExpand" Margin="0,0,0,0" >
                    <ScrollView HorizontalScrollBarVisibility="Never" VerticalScrollBarVisibility="Never" >
                    <StackLayout ><controls:MenuControl IsVisible="{Binding IsManager}" FirstItemCommand="{Binding EmployeeCenterCommand}" FirstItemImage="EmployeeCenter.png" FirstItemText="Employee Center" SecondItemText="Manager Center"
                                      SecondItemImage="managercentericon.png"
                                      SecondItemCommand="{Binding ManagerCenterCommand}"
                                      ThirdItemTitleText="Live Chat"
                                      ThirdItemImageSource="{Binding newmessage}"                                                       
                                      ThirdItemCommand="{Binding LifeChatCommand}" FourthItemTitleText="News &amp; Events"
                                      FourthItemImageSource="newsboardicon.png"
                                                        FourthItemCommand="{Binding NewsCommand}" FifthItemTitleText="Quick Links"
                                      FifthItemImageSource="quicklinksicon.png"
                                                        FifthItemCommand="{Binding QuickLinksCommand}">
                    <controls:MenuControl.Triggers>
                        <DataTrigger TargetType="controls:MenuControl" Binding="{Binding User.employeeType}" Value="4">
                            <Setter Property="SecondItemText" Value="HR Officer Center"/>
                            <Setter Property="SecondItemCommand" Value="{Binding OfficerCenterCommand}"/>
                        </DataTrigger>
                    </controls:MenuControl.Triggers>
                    
                </controls:MenuControl>

                
                                     <controls:MenuControl  IsVisible="{Binding IsEmployee}"  FirstItemCommand="{Binding EmployeeCenterCommand}" FirstItemImage="EmployeeCenter.png" FirstItemText="Employee Center"
                                                                         SecondItemText="Live Chat"  SecondItemImage="{Binding newmessage}" SecondItemCommand="{Binding LifeChatCommand}"
                                                                         FourthItemTitleText="News  &amp; Events" FourthItemImageSource="newsboardicon.png" FourthItemCommand="{Binding NewsCommand}"
                                                                         FifthItemTitleText="Quik Links" FifthItemImageSource="quicklinksicon.png" FifthItemCommand="{Binding QuickLinksCommand}"></controls:MenuControl>

                        </StackLayout>
                    </ScrollView>
                </StackLayout>
            </StackLayout>

    
            <StackLayout   HorizontalOptions="Center" VerticalOptions="StartAndExpand">
            <controls:DateHeader />
            </StackLayout>

        
            <Frame BackgroundColor="#214455" BorderColor="Transparent" CornerRadius="30" Padding="15"  Margin="60,10,55,7"  VerticalOptions="EndAndExpand">
                <Grid ColumnDefinitions="*,*,*,*" >
                    <Grid.Resources>
                        <ResourceDictionary>
                            <Style TargetType="Image">
                                <Setter Property="Aspect" Value="AspectFit"></Setter>
                                <Setter Property="HeightRequest" Value="30"></Setter>
                                <Setter Property="WidthRequest" Value="30"></Setter>

                            </Style>
                        </ResourceDictionary>
                    </Grid.Resources>
                    <Image Source="bottomnavhomeicon.png" Aspect="AspectFit" Grid.Column="0">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding GoHome}"></TapGestureRecognizer>
                        </Image.GestureRecognizers>
                    </Image>
                    <Image Source="logoutIcon.png" Grid.Column="3">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding SignOutCommand}"></TapGestureRecognizer>
                        </Image.GestureRecognizers>
                    </Image>
                    <Grid Grid.Column="1" Grid.Row="0" RowDefinitions="20,*" >
                        <Image Source="notIcon.png" Grid.RowSpan="2" BackgroundColor="Transparent"   >
                            <Image.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding NotifiCationCommand}" CommandParameter="{Binding  Source={x:Reference Pancake}}"></TapGestureRecognizer>
                            </Image.GestureRecognizers>
                        </Image>

                        <Ellipse IsVisible="{Binding  Isnotification}" 
        
         WidthRequest="19"
                                Fill="Red"
         HeightRequest="19"
                          VerticalOptions="Start"
         HorizontalOptions="Center" Margin="8,-5,0,0" />
                        <Label IsVisible="{Binding  Isnotification}" TextColor="White" FontFamily="Poppins-Bold.ttf"
                               Text="{Binding NotificationCount}"
        FontSize="10"
                            
                                HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
VerticalTextAlignment="Center"      >   <Label.Margin>
                    <OnPlatform x:TypeArguments="Thickness">
                        <On Platform="iOS" Value="11,-10,5,0"></On>
                        <On Platform="Android" Value="11,-7.5,3,0"/>

                    </OnPlatform>
                </Label.Margin>
                            </Label>

                    </Grid>
                    <Image Source="bottomnavhelpicon.png" Grid.Column="2">
                        <Image.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowFaqCommand}" CommandParameter="{Binding  Source={x:Reference Pancake}}"></TapGestureRecognizer>
                        </Image.GestureRecognizers>
                    </Image>


                </Grid>
            </Frame>

            <Grid IsVisible="{Binding NotiISopend}" VerticalOptions="FillAndExpand"
                                HorizontalOptions="FillAndExpand"         >
                <BoxView x:Name="NotiGrid" BackgroundColor="White" Opacity="0.1">
                    <BoxView.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding NotifiCationCommand}" CommandParameter="{Binding  Source={x:Reference Pancake}}" />
                    </BoxView.GestureRecognizers>
                </BoxView>
                <pancakeview:PancakeView  
                  x:Name="Pancake"
                TranslationY="800"
                                      
                                  
                                Padding="0"
                                BackgroundColor="#F7F6F3"
                          
                                  CornerRadius="15,15,0,0" >
                    <StackLayout>
                        <StackLayout  BackgroundColor="#214455" HeightRequest="40" >
                            <Label HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" TextColor="White" FontSize="20" Text=">" FontAttributes="Bold" Rotation="90" >
                                <Label.GestureRecognizers>
                                    <SwipeGestureRecognizer Command="{Binding NotifiCationCommand}" CommandParameter="{Binding  Source={x:Reference Pancake}}" Direction="Down" />
                                    <TapGestureRecognizer Command="{Binding NotifiCationCommand}" CommandParameter="{Binding  Source={x:Reference Pancake}}" />
                                     
                                </Label.GestureRecognizers>
                            </Label>


                        </StackLayout>

                        <notification:NotificationView />
                    </StackLayout>
                        <pancakeview:PancakeView.Margin>
                    <OnPlatform x:TypeArguments="Thickness">
                        <On Platform="iOS" Value="5,150,5,0"></On>
                        <On Platform="Android" Value="5,100,5,0"/>

                    </OnPlatform>
                </pancakeview:PancakeView.Margin>
                </pancakeview:PancakeView>
            </Grid>

        </Grid>
    </ContentPage.Content>
</ContentPage>
